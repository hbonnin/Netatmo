<!DOCTYPE html>
<head>
<title>Netatmo php program</title>
<meta charset='utf-8'>
</head>
<body>

<p style='font-size:13px'>
This program uses the Netatmo php sdk and some Google development tools for the graphics.<br>
It also uses some other programs to compute data about the moon:</p>
<ul style='font-size:13px'>
<li>MoonPhase.php is under an MIT license</li>
<li>Moonime.php is under an GPL license</li>
</ul>
<p style='font-size:13px'>
The server needs to have a php version >= 5, with curl and json enabled.<br>
If you have a Netatmo account, you can  see a demo at  <A href="http://fraysseix.fr/Netatmo/">Netatmo</A>.
</p>
<p>
The goal of this program is to display all the available measures and data of the stations<br>
and interactively draw graphics.
</p>
<h3>Main windows</h3>
<ul>
<li>	Display the last measures on a Google map of all the stations and all their modules.<br>
</li>

<li>    Graphics of the measures of each station:<br>
		(5 minutes, 30 minutes, 1 hour, 3 hours, 1 day, 1 week).
</li>
<li>	Graphics comparing the outdoor measures of selected stations: temperature, humidity or pressure, <br>
		(1 day or 1 week), 
</li>
<li>	Graphics comparing the measures of all your modules: temperature, humidity, noise, amount of rain, wind<br>
		(30 minutes, 1hour, 3 hours, 1 day or 1 week), 
</li>
<li>	Graphics comparing the exterior temperatures or exterior/interior humidity or rainfall with the previous years, semester or month,<br>
		(1 day or 1 week), 
</li>
<li>
	The wind speed and direction.
</li>
</ul>

<h3>Google map mouse actions</h3>
<ul>
<li>	Move over a <b>green marker</b>, to display the measures of a station and all its modules and:</li>
		<ul>
			<li> The sunrise and sunset are computed with a zenith of 90.8333 (astronomical time).</li>
			<li> The phase of the moon (0-new moon 25-first quarter 50-full moon 75-last quarter 100-new moon).</li>
			<li> Moonrise, moonset (the moonset time is appended with a + if it falls the following day). </li>
		</ul>
<li>	Left click on a <b>green marker</b> increases the zoom.</li>
<li>    Right click on a <b>green marker</b> to hide the marker.</li>
<li>	Left click on <b>Home</b> to redraw the map to original position,</li>
<li>	Left click on <b>Hide Markers / Show Markers</b> to hide or restore the green markers.</li>
</ul>
<h3>Icons : Display the measures of a station </h3>
<ul>
<li>The Dewpoint is displayed in dark red under the outside temperature ,</li>
<li>     Move over a measure to display the date of the measure,<br>
		over the station name, to display the latitude and longitude of the station.</li>		
</ul>
<h3>All graphics</h3>
<ul>
<li style='list-style-type:none;'>
	<h4>Dates of measures </h4>
	<ul>
	<li style='list-style-type:none;'>	
			If you set the date of the beginning of the measures to the date of the end of the measures,<br> the program
			computes the starting date automatically according to the frequency of measures:<br><br>
			<table>
			<tr><th>Frequency</th><th>Period of measures</th></tr>
			<tr><td>1 week</td><td>6 months</td></tr>
			<tr><td>1 day</td><td>1 month</td></tr>
			<tr><td>3 hours</td><td>2 weeks</td></tr>
			<tr><td>30 minutes</td><td>2 days</td></tr>
			<tr><td>5 minutes</td><td>1 day</td></tr>
			</table>
			</li>

	</ul>

	<h4>Zooming and erasing curves</h4>
	<ul>
	<li style='list-style-type:disc;'>	
			If you click on the name of a curve (the squares inside the drawing), the corresponding curve will be erased
			and the drawing will be rescaled without reloading the data.</li>
	<li style='list-style-type:disc;'>	
			To zoom, click on a point of the curve: the frequency of measures will be increased (if possible),<br>
			if the curve has less than 20 points and the frequency is maximal, nothing will happen.<br>
			By default, this zoom feature is disabled on <b>Ipad</b>.</li>
	</ul>

	<h4>The buttons <b>&#8592;  x  &#8594 o; </b></h4>
	<ul>
		<li><b>&#8592;</b> displays the previous period</li> 
		<li><b>&#8594;</b> displays the next period</li> 
		<li><b>x</b>  increases the displayed period</li> 
		<li><b>o</b>  reset the defaults</li> 
	</ul>
</ul>	
<h3>Other remarks</h3>
<ul>
<li>	The Netatmo settings define the language used (French/English) and the temperature, pressure and wind speed units.</li>
<li>    To reload the units, you should load the main window (Google map).   </li>
<li>	The program uses cookies to save: the token, the map type, the zoom factor and the center of the map </li>
</ul>

<h3>Install</h3>
To get a CLIENT_ID and a CLIENT_SECRET, you have to create an aplication. (<a href="https://dev.netatmo.com/dev/createapp">create an application </a>).
To get a Google API key visit <a href="https://console.developers.google.com/apis/credentials?project=api-project-89035573974">Google console </a>.
(The key is free and obtained within minutes.)
<ul>
<li>	Unzip the archive</li>
<li>	Put your client_id, client_secret and google_key in Config.php.EXEMPLE and renamed it Config.php,</li>
<li>	open index.html in your web browser</li>
</ul>  

<h3>Screenshots</h3>
<h4>Main screen</h4>
<IMG SRC="image/google.png" ALT="google.png" TITLE="Last Measures">
<h4>Graphics</h4>
<table>
<tr>
	<td>Graphics of one station.</td>
	<td>Comparing the temperature among modules of one station.</td>
	</tr>
<tr>
	<td><IMG SRC="image/graphiques.png" width="600" ALT="graphiques.png" TITLE="Graphics of one station "></td>
	<td><IMG SRC="image/modules.png" width="600" ALT="modules.png" TITLE="Modules of one station"></td>
</tr>
<tr>
	<td>Comparing the humidity among stations.</td><td>Comparing temperatures with previous year.</td>
</tr>
<tr>
	<td><IMG SRC="image/compare.png" width="600" ALT="compare" TITLE="Humidity of 5 stations"></td>
	<td><IMG SRC="image/compareH.png" width="600" ALT="history" TITLE="Temperatures now and 1 year ago"></td>
</tr>
<tr>
	<td>Pluviometry.</td></td>
</tr>
<tr>
	<td><IMG SRC="image/Pluviometry.png" width="600" ALT="history" TITLE="Pluviometry"></td>
</tr>

</table>
</body>
</html>
